name: "ğŸš€ Deploy to IONOS (scam-radar.com)"

on:
  push:
    branches:
      - principale      # usa "principale" o "main" secondo il tuo branch
  workflow_dispatch:     # permette il deploy manuale

# Blocca qualsiasi scrittura sul repository (read-only)
permissions:
  contents: read

jobs:
  deploy:
    name: "ğŸ“¤ Upload to IONOS via SFTP"
    runs-on: ubuntu-latest

    steps:
      - name: "ğŸ“¥ Checkout repository (read-only)"
        uses: actions/checkout@v4
        with:
          persist-credentials: false   # Non salva credenziali Git

      - name: "ğŸ“¤ Deploy via SFTP"
        uses: wlixcc/SFTP-Deploy-Action@v1.2.4
        with:
          server:      ${{ secrets.IONOS_FTP_HOST }}
          username:    ${{ secrets.IONOS_FTP_USER }}
          password:    ${{ secrets.IONOS_FTP_PASSWORD }}
          port:        22
          local_path:  "./"
          remote_path: "/"

      - name: "âœ… Deploy completed"
        run: |
          echo "ğŸ‰ Deploy su www.scam-radar.com completato!"
          echo "ğŸ“… Data: $(date)"
          echo "âš ï¸ Workflow READ-ONLY: nessuna modifica al repository"
